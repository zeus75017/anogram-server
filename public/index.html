<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anogram</title>
  <link rel="stylesheet" href="../src/styles/main.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
  <div id="app">
    <!-- Auth Container -->
    <div class="auth-container" id="authContainer">
      <div class="title-bar auth-title-bar">
        <div class="title-bar-left"></div>
        <div class="title-bar-center">
          <span class="app-title">Anogram</span>
        </div>
        <div class="title-bar-controls">
          <button class="control-btn" id="minimizeBtnAuth"><i class="fas fa-minus"></i></button>
          <button class="control-btn" id="maximizeBtnAuth"><i class="far fa-square"></i></button>
          <button class="control-btn close-btn" id="closeBtnAuth"><i class="fas fa-times"></i></button>
        </div>
      </div>

      <!-- Login Page -->
      <div class="auth-page" id="loginPage">
        <div class="auth-content">
          <div class="auth-logo">
            <div class="logo-circle">
              <i class="fas fa-paper-plane"></i>
            </div>
          </div>
          <h1 class="auth-title">Anogram</h1>
          <p class="auth-subtitle">Connectez-vous pour continuer</p>

          <form class="auth-form" id="loginForm">
            <div class="form-group">
              <div class="input-wrapper">
                <i class="fas fa-user"></i>
                <input type="text" id="loginInput" placeholder="Nom d'utilisateur ou téléphone" required>
              </div>
            </div>
            <div class="form-group">
              <div class="input-wrapper">
                <i class="fas fa-lock"></i>
                <input type="password" id="loginPassword" placeholder="Mot de passe" required>
              </div>
            </div>
            <div class="error-message" id="loginError"></div>
            <button type="submit" class="auth-btn primary">
              <span>Connexion</span>
              <i class="fas fa-arrow-right"></i>
            </button>
          </form>

          <div class="auth-footer">
            <span>Pas encore de compte ?</span>
            <a href="#" id="showRegister">Créer un compte</a>
          </div>
        </div>
      </div>

      <!-- Register Page -->
      <div class="auth-page hidden" id="registerPage">
        <div class="auth-content">
          <div class="auth-logo">
            <div class="logo-circle">
              <i class="fas fa-user-plus"></i>
            </div>
          </div>
          <h1 class="auth-title">Créer un compte</h1>
          <p class="auth-subtitle">Rejoignez Anogram maintenant</p>

          <form class="auth-form" id="registerForm">
            <div class="form-group">
              <div class="input-wrapper">
                <i class="fas fa-user"></i>
                <input type="text" id="registerName" placeholder="Nom complet" required>
              </div>
            </div>
            <div class="form-group">
              <div class="input-wrapper">
                <i class="fas fa-at"></i>
                <input type="text" id="registerUsername" placeholder="Nom d'utilisateur" required>
              </div>
            </div>
            <div class="form-group">
              <div class="input-wrapper">
                <i class="fas fa-phone"></i>
                <input type="tel" id="registerPhone" placeholder="Numéro de téléphone" required>
              </div>
            </div>
            <div class="form-group">
              <div class="input-wrapper">
                <i class="fas fa-lock"></i>
                <input type="password" id="registerPassword" placeholder="Mot de passe" required>
              </div>
            </div>
            <div class="form-group">
              <div class="input-wrapper">
                <i class="fas fa-lock"></i>
                <input type="password" id="registerConfirmPassword" placeholder="Confirmer le mot de passe" required>
              </div>
            </div>
            <div class="error-message" id="registerError"></div>
            <button type="submit" class="auth-btn primary">
              <span>S'inscrire</span>
              <i class="fas fa-arrow-right"></i>
            </button>
          </form>

          <div class="auth-footer">
            <span>Déjà un compte ?</span>
            <a href="#" id="showLogin">Se connecter</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container hidden" id="appContainer">
      <div class="title-bar">
        <div class="title-bar-left">
          <div class="menu-btn" id="menuBtn">
            <i class="fas fa-bars"></i>
          </div>
          <div class="search-container">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Rechercher" id="searchInput">
          </div>
        </div>
        <div class="title-bar-center">
          <span class="app-title">Anogram</span>
        </div>
        <div class="title-bar-controls">
          <button class="control-btn" id="minimizeBtn"><i class="fas fa-minus"></i></button>
          <button class="control-btn" id="maximizeBtn"><i class="far fa-square"></i></button>
          <button class="control-btn close-btn" id="closeBtn"><i class="fas fa-times"></i></button>
        </div>
      </div>

      <div class="main-container">
        <!-- Sidebar Menu -->
        <div class="sidebar-menu" id="sidebarMenu">
          <div class="menu-header">
            <div class="user-avatar large" id="menuAvatar">
              <img style="display: none;" alt="" id="menuAvatarImg">
              <div class="avatar-placeholder" id="menuAvatarPlaceholder">
                <i class="fas fa-user"></i>
              </div>
            </div>
            <div class="user-info">
              <span class="user-name" id="menuUserName">Mon Profil</span>
              <span class="user-phone" id="menuUserPhone">+33 6 12 34 56 78</span>
            </div>
          </div>
          <div class="menu-items">
            <div class="menu-item" id="menuNewGroup"><i class="fas fa-user-group"></i> Nouveau groupe</div>
            <div class="menu-item" id="menuNewChannel"><i class="fas fa-bullhorn"></i> Nouveau canal</div>
            <div class="menu-item" id="menuContacts"><i class="fas fa-user"></i> Contacts</div>
            <div class="menu-item" id="menuCalls"><i class="fas fa-phone"></i> Appels</div>
            <div class="menu-item" id="menuSaved"><i class="fas fa-bookmark"></i> Messages enregistrés</div>
            <div class="menu-item" id="menuSettings"><i class="fas fa-cog"></i> Paramètres</div>
            <div class="menu-item admin-menu-item" id="menuAdmin" style="display: none;"><i class="fas fa-shield-alt"></i> Panel Admin</div>
            <div class="menu-divider"></div>
            <div class="menu-item" id="menuLogout"><i class="fas fa-sign-out-alt"></i> Déconnexion</div>
          </div>
        </div>

        <!-- Chat List -->
        <div class="chat-list" id="chatList">
          <div class="chat-list-header">
            <span>Toutes les discussions</span>
          </div>
          <div class="chats-container" id="chatsContainer"></div>
          <div class="new-chat-btn" id="newChatBtn">
            <i class="fas fa-pen"></i>
          </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-area" id="chatArea">
          <div class="chat-placeholder" id="chatPlaceholder">
            <div class="placeholder-content">
              <i class="fas fa-comments"></i>
              <p>Sélectionnez une discussion pour commencer</p>
            </div>
          </div>

          <div class="chat-content" id="chatContent" style="display: none;">
            <div class="chat-header">
              <div class="chat-header-left" id="chatHeaderLeft" style="cursor: pointer;">
                <div class="user-avatar">
                  <img id="currentChatAvatar" style="display: none;" alt="">
                  <div class="avatar-placeholder" id="currentChatAvatarPlaceholder">
                    <i class="fas fa-user"></i>
                  </div>
                </div>
                <div class="chat-header-info">
                  <span class="chat-header-name" id="currentChatName"></span>
                  <span class="chat-header-status" id="currentChatStatus">en ligne</span>
                </div>
              </div>
              <div class="chat-header-actions">
                <button class="action-btn" id="callAudioBtn" title="Appel audio"><i class="fas fa-phone"></i></button>
                <button class="action-btn" id="callVideoBtn" title="Appel vidéo"><i class="fas fa-video"></i></button>
                <button class="action-btn" id="chatSearchBtn" title="Rechercher"><i class="fas fa-search"></i></button>
                <button class="action-btn" id="chatMenuBtn" title="Plus"><i class="fas fa-ellipsis-v"></i></button>
              </div>
            </div>

            <div class="messages-container" id="messagesContainer"></div>

            <div class="message-input-container">
              <!-- Reply Preview -->
              <div class="reply-preview" id="replyPreview">
                <div class="reply-preview-content">
                  <div class="reply-preview-bar"></div>
                  <div class="reply-preview-text">
                    <span class="reply-preview-name" id="replyPreviewName">Nom</span>
                    <span class="reply-preview-message" id="replyPreviewMessage">Message</span>
                  </div>
                </div>
                <button class="reply-cancel-btn" onclick="cancelReply()"><i class="fas fa-times"></i></button>
              </div>
              <!-- Attachment Preview -->
              <div class="attach-preview" id="attachPreview"></div>
              <button class="input-btn" id="attachBtn"><i class="fas fa-paperclip"></i></button>
              <div class="message-input-wrapper">
                <input type="text" placeholder="Écrire un message..." id="messageInput">
                <button class="emoji-btn" id="emojiBtn"><i class="far fa-smile"></i></button>
              </div>
              <button class="voice-btn" id="voiceBtn" title="Message vocal">
                <i class="fas fa-microphone"></i>
              </button>
              <button class="send-btn" id="sendBtn">
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
            <!-- Voice Recording UI -->
            <div class="voice-recording hidden" id="voiceRecording">
              <div class="voice-recording-content">
                <div class="recording-indicator">
                  <span class="recording-dot"></span>
                  <span class="recording-time" id="recordingTime">0:00</span>
                </div>
                <div class="recording-wave">
                  <span></span><span></span><span></span><span></span><span></span>
                </div>
                <div class="recording-actions">
                  <button class="recording-cancel" id="cancelRecording" title="Annuler">
                    <i class="fas fa-trash"></i>
                  </button>
                  <button class="recording-send" id="sendRecording" title="Envoyer">
                    <i class="fas fa-paper-plane"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- New Chat Modal -->
    <div class="modal" id="newChatModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Nouvelle discussion</h2>
          <button class="modal-close" id="closeNewChatModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="search-container modal-search">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Rechercher un utilisateur..." id="userSearchInput">
          </div>
          <div class="user-search-results" id="userSearchResults">
            <div class="search-hint">
              <i class="fas fa-user-plus"></i>
              <p>Recherchez un utilisateur par nom ou téléphone</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- New Group Modal -->
    <div class="modal" id="newGroupModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2>Nouveau groupe</h2>
          <button class="modal-close" id="closeNewGroupModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="group-form">
            <div class="group-avatar-section">
              <div class="user-avatar xlarge" id="groupAvatarPreview">
                <div class="avatar-placeholder">
                  <i class="fas fa-users"></i>
                </div>
              </div>
              <label for="groupAvatarInput" class="change-avatar-btn">
                <i class="fas fa-camera"></i>
                Ajouter une photo
              </label>
              <input type="file" id="groupAvatarInput" accept="image/*" hidden>
            </div>
            <div class="form-group">
              <label>Nom du groupe</label>
              <input type="text" id="groupNameInput" placeholder="Nom du groupe" class="full-input">
            </div>
            <div class="form-group">
              <label>Description (optionnel)</label>
              <textarea id="groupDescInput" placeholder="Description du groupe" class="full-input"></textarea>
            </div>
            <div class="form-group">
              <label>Ajouter des membres</label>
              <div class="search-container modal-search">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Rechercher..." id="groupMemberSearch">
              </div>
              <div class="selected-members" id="selectedMembers"></div>
              <div class="member-search-results" id="memberSearchResults"></div>
            </div>
            <button class="auth-btn primary" id="createGroupBtn">
              <span>Créer le groupe</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Contacts Modal -->
    <div class="modal" id="contactsModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2>Contacts</h2>
          <button class="modal-close" id="closeContactsModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="search-container modal-search">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Rechercher un contact..." id="contactSearchInput">
          </div>
          <div class="contacts-list" id="contactsList">
            <div class="search-hint">
              <i class="fas fa-user-friends"></i>
              <p>Aucun contact pour le moment</p>
            </div>
          </div>
          <button class="auth-btn primary" id="addContactBtn" style="margin-top: 15px;">
            <i class="fas fa-user-plus"></i>
            <span>Ajouter un contact</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Add Contact Modal -->
    <div class="modal" id="addContactModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Ajouter un contact</h2>
          <button class="modal-close" id="closeAddContactModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="search-container modal-search">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Rechercher par nom ou téléphone..." id="addContactSearchInput">
          </div>
          <div class="user-search-results" id="addContactResults">
            <div class="search-hint">
              <i class="fas fa-user-plus"></i>
              <p>Recherchez un utilisateur à ajouter</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Calls Modal -->
    <div class="modal" id="callsModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2>Appels</h2>
          <button class="modal-close" id="closeCallsModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="calls-list" id="callsList">
            <div class="search-hint">
              <i class="fas fa-phone-slash"></i>
              <p>Aucun appel récent</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Saved Messages Modal -->
    <div class="modal" id="savedMessagesModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2>Messages enregistrés</h2>
          <button class="modal-close" id="closeSavedMessagesModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="saved-messages-list" id="savedMessagesList">
            <div class="search-hint">
              <i class="fas fa-bookmark"></i>
              <p>Aucun message enregistré</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
      <div class="modal-content settings-modal">
        <div class="modal-header">
          <h2>Paramètres</h2>
          <button class="modal-close" id="closeSettingsModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="settings-section">
            <div class="settings-avatar">
              <div class="user-avatar xlarge" id="settingsAvatar">
                <img style="display: none;" alt="" id="settingsAvatarImg">
                <div class="avatar-placeholder" id="settingsAvatarPlaceholder">
                  <i class="fas fa-user"></i>
                </div>
              </div>
              <label for="avatarInput" class="change-avatar-btn">
                <i class="fas fa-camera"></i>
                Changer la photo
              </label>
              <input type="file" id="avatarInput" accept="image/*" hidden>
            </div>
            <div class="settings-form">
              <div class="form-group">
                <label>Nom complet</label>
                <input type="text" id="settingsDisplayName" placeholder="Votre nom">
              </div>
              <div class="form-group">
                <label>Bio</label>
                <textarea id="settingsBio" placeholder="Écrivez quelque chose sur vous..."></textarea>
              </div>
              <div class="form-group">
                <label>Nom d'utilisateur</label>
                <input type="text" id="settingsUsername" disabled>
              </div>
              <div class="form-group">
                <label>Téléphone</label>
                <input type="text" id="settingsPhone" disabled>
              </div>

              <div class="settings-divider"></div>
              <h3 class="settings-subtitle">Confidentialité</h3>

              <div class="form-group toggle-group">
                <label>
                  <span>Afficher mon numéro de téléphone</span>
                  <small>Les autres utilisateurs pourront voir votre numéro</small>
                </label>
                <label class="toggle-switch">
                  <input type="checkbox" id="settingsShowPhone">
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <div class="form-group toggle-group">
                <label>
                  <span>Afficher ma dernière connexion</span>
                  <small>Les autres verront "vu récemment" si désactivé</small>
                </label>
                <label class="toggle-switch">
                  <input type="checkbox" id="settingsShowLastSeen" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <div class="form-group toggle-group">
                <label>
                  <span>Afficher ma photo de profil</span>
                  <small>Votre avatar sera masqué si désactivé</small>
                </label>
                <label class="toggle-switch">
                  <input type="checkbox" id="settingsShowProfilePhoto" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <button class="auth-btn primary" id="saveSettingsBtn">
                <span>Enregistrer</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Incoming Call Modal -->
    <div class="modal" id="incomingCallModal">
      <div class="modal-content call-modal">
        <div class="call-info">
          <div class="user-avatar xlarge call-avatar" id="incomingCallAvatar">
            <div class="avatar-placeholder">
              <i class="fas fa-user"></i>
            </div>
          </div>
          <h2 id="incomingCallerName">Appel entrant</h2>
          <p id="incomingCallType">Appel audio</p>
        </div>
        <div class="call-actions">
          <button class="call-btn decline" id="declineCallBtn">
            <i class="fas fa-phone-slash"></i>
          </button>
          <button class="call-btn accept" id="acceptCallBtn">
            <i class="fas fa-phone"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Active Call Modal -->
    <div class="modal" id="activeCallModal">
      <div class="modal-content call-modal">
        <div class="call-info">
          <div class="user-avatar xlarge call-avatar" id="activeCallAvatar">
            <div class="avatar-placeholder">
              <i class="fas fa-user"></i>
            </div>
          </div>
          <h2 id="activeCallName">En appel</h2>
          <p id="activeCallDuration">00:00</p>
        </div>
        <div class="call-actions">
          <button class="call-btn mute" id="muteCallBtn">
            <i class="fas fa-microphone"></i>
          </button>
          <button class="call-btn end" id="endCallBtn">
            <i class="fas fa-phone-slash"></i>
          </button>
          <button class="call-btn speaker" id="speakerCallBtn">
            <i class="fas fa-volume-up"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Message Context Menu -->
    <div class="context-menu" id="messageContextMenu">
      <div class="context-menu-item" id="contextReply"><i class="fas fa-reply"></i> Répondre</div>
      <div class="context-menu-item" id="contextCopy"><i class="fas fa-copy"></i> Copier</div>
      <div class="context-menu-item" id="contextSave"><i class="fas fa-bookmark"></i> Enregistrer</div>
      <div class="context-menu-item" id="contextDelete"><i class="fas fa-trash"></i> Supprimer</div>
    </div>

    <!-- Chat Menu (3 dots) -->
    <div class="context-menu" id="chatContextMenu">
      <div class="context-menu-item" id="chatMenuInfo"><i class="fas fa-info-circle"></i> Voir les infos</div>
      <div class="context-menu-item" id="chatMenuEdit" style="display: none;"><i class="fas fa-edit"></i> Modifier</div>
      <div class="context-menu-item" id="chatMenuMembers" style="display: none;"><i class="fas fa-users"></i> Gérer les membres</div>
      <div class="context-menu-item" id="chatMenuMute"><i class="fas fa-bell-slash"></i> Notifications</div>
      <div class="context-menu-item" id="chatMenuLeave" style="display: none;"><i class="fas fa-sign-out-alt"></i> Quitter</div>
      <div class="context-menu-item" id="chatMenuDelete"><i class="fas fa-trash"></i> Supprimer</div>
    </div>

    <!-- Group/Channel Info Modal -->
    <div class="modal" id="groupInfoModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2 id="groupInfoTitle">Infos du groupe</h2>
          <button class="modal-close" id="closeGroupInfoModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="group-info-section">
            <div class="group-info-header">
              <div class="user-avatar xlarge" id="groupInfoAvatar">
                <div class="avatar-placeholder">
                  <i class="fas fa-users"></i>
                </div>
              </div>
              <h3 id="groupInfoName">Nom du groupe</h3>
              <p id="groupInfoDesc" class="group-description"></p>
              <p id="groupInfoMemberCount" class="member-count"></p>
              <button class="auth-btn primary" id="groupInfoEditBtn" style="display: none; margin-top: 15px;">
                <i class="fas fa-edit"></i> Modifier
              </button>
            </div>
            <div class="group-members-section">
              <h4>Membres</h4>
              <div class="group-members-list" id="groupMembersList"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- User Profile Modal -->
    <div class="modal" id="userProfileModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2>Profil</h2>
          <button class="modal-close" id="closeUserProfileModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="group-info-section">
            <div class="group-info-header">
              <div class="user-avatar xlarge" id="userProfileAvatar">
                <div class="avatar-placeholder">
                  <i class="fas fa-user"></i>
                </div>
              </div>
              <h3 id="userProfileName">Nom</h3>
              <p id="userProfileUsername" class="group-description"></p>
              <p id="userProfileBio" class="group-description" style="margin-top: 10px; white-space: pre-wrap;"></p>
              <p id="userProfileStatus" class="member-count"></p>
            </div>
            <div class="user-profile-info" style="margin-top: 20px;">
              <div class="profile-info-item" id="userProfilePhoneSection">
                <i class="fas fa-phone"></i>
                <span id="userProfilePhone"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Group/Channel Modal -->
    <div class="modal" id="editGroupModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2 id="editGroupTitle">Modifier le groupe</h2>
          <button class="modal-close" id="closeEditGroupModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="group-form">
            <div class="group-avatar-section">
              <div class="user-avatar xlarge" id="editGroupAvatarPreview">
                <div class="avatar-placeholder">
                  <i class="fas fa-users"></i>
                </div>
              </div>
              <label for="editGroupAvatarInput" class="change-avatar-btn">
                <i class="fas fa-camera"></i>
                Changer la photo
              </label>
              <input type="file" id="editGroupAvatarInput" accept="image/*" hidden>
            </div>
            <div class="form-group">
              <label>Nom</label>
              <input type="text" id="editGroupNameInput" placeholder="Nom" class="full-input">
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="editGroupDescInput" placeholder="Description" class="full-input"></textarea>
            </div>
            <button class="auth-btn primary" id="saveGroupBtn">
              <span>Enregistrer</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Manage Members Modal -->
    <div class="modal" id="manageMembersModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2>Gérer les membres</h2>
          <button class="modal-close" id="closeManageMembersModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="search-container modal-search">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Ajouter un membre..." id="addMemberSearch">
          </div>
          <div class="add-member-results" id="addMemberResults"></div>
          <h4 style="margin: 15px 0;">Membres actuels</h4>
          <div class="current-members-list" id="currentMembersList"></div>
        </div>
      </div>
    </div>

    <!-- New Channel Modal -->
    <div class="modal" id="newChannelModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2>Nouveau canal</h2>
          <button class="modal-close" id="closeNewChannelModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <div class="group-form">
            <div class="group-avatar-section">
              <div class="user-avatar xlarge" id="channelAvatarPreview">
                <div class="avatar-placeholder">
                  <i class="fas fa-bullhorn"></i>
                </div>
              </div>
              <label for="channelAvatarInput" class="change-avatar-btn">
                <i class="fas fa-camera"></i>
                Ajouter une photo
              </label>
              <input type="file" id="channelAvatarInput" accept="image/*" hidden>
            </div>
            <div class="form-group">
              <label>Nom du canal</label>
              <input type="text" id="channelNameInput" placeholder="Nom du canal" class="full-input">
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="channelDescInput" placeholder="Description du canal" class="full-input"></textarea>
            </div>
            <div class="form-group toggle-group">
              <label>
                <span>Canal public</span>
                <small>Tout le monde peut trouver et rejoindre le canal</small>
              </label>
              <label class="toggle-switch">
                <input type="checkbox" id="channelPublic" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <button class="auth-btn primary" id="createChannelBtn">
              <span>Créer le canal</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Emoji Picker -->
    <div class="emoji-picker" id="emojiPicker">
      <div class="emoji-grid" id="emojiGrid"></div>
    </div>

    <!-- Admin Panel Modal -->
    <div class="modal" id="adminPanelModal">
      <div class="modal-content admin-modal">
        <div class="modal-header">
          <h2><i class="fas fa-shield-alt"></i> Panel Admin</h2>
          <button class="modal-close" id="closeAdminPanelModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <!-- Admin Tabs -->
          <div class="admin-tabs">
            <button class="admin-tab active" data-tab="dashboard"><i class="fas fa-chart-line"></i> Dashboard</button>
            <button class="admin-tab" data-tab="users"><i class="fas fa-users"></i> Utilisateurs</button>
            <button class="admin-tab" data-tab="conversations"><i class="fas fa-comments"></i> Conversations</button>
            <button class="admin-tab" data-tab="messages"><i class="fas fa-envelope"></i> Messages</button>
            <button class="admin-tab" data-tab="logs"><i class="fas fa-history"></i> Logs</button>
          </div>

          <!-- Dashboard Tab -->
          <div class="admin-tab-content active" id="adminDashboard">
            <div class="admin-stats-grid">
              <div class="admin-stat-card">
                <div class="stat-icon users"><i class="fas fa-users"></i></div>
                <div class="stat-info">
                  <span class="stat-value" id="statTotalUsers">0</span>
                  <span class="stat-label">Utilisateurs</span>
                </div>
              </div>
              <div class="admin-stat-card">
                <div class="stat-icon online"><i class="fas fa-circle"></i></div>
                <div class="stat-info">
                  <span class="stat-value" id="statOnlineUsers">0</span>
                  <span class="stat-label">En ligne</span>
                </div>
              </div>
              <div class="admin-stat-card">
                <div class="stat-icon messages"><i class="fas fa-envelope"></i></div>
                <div class="stat-info">
                  <span class="stat-value" id="statTotalMessages">0</span>
                  <span class="stat-label">Messages</span>
                </div>
              </div>
              <div class="admin-stat-card">
                <div class="stat-icon today"><i class="fas fa-calendar-day"></i></div>
                <div class="stat-info">
                  <span class="stat-value" id="statMessagesToday">0</span>
                  <span class="stat-label">Messages aujourd'hui</span>
                </div>
              </div>
              <div class="admin-stat-card">
                <div class="stat-icon groups"><i class="fas fa-user-group"></i></div>
                <div class="stat-info">
                  <span class="stat-value" id="statTotalGroups">0</span>
                  <span class="stat-label">Groupes</span>
                </div>
              </div>
              <div class="admin-stat-card">
                <div class="stat-icon channels"><i class="fas fa-bullhorn"></i></div>
                <div class="stat-info">
                  <span class="stat-value" id="statTotalChannels">0</span>
                  <span class="stat-label">Canaux</span>
                </div>
              </div>
              <div class="admin-stat-card">
                <div class="stat-icon calls"><i class="fas fa-phone"></i></div>
                <div class="stat-info">
                  <span class="stat-value" id="statTotalCalls">0</span>
                  <span class="stat-label">Appels</span>
                </div>
              </div>
              <div class="admin-stat-card">
                <div class="stat-icon active"><i class="fas fa-bolt"></i></div>
                <div class="stat-info">
                  <span class="stat-value" id="statActiveUsers">0</span>
                  <span class="stat-label">Actifs 24h</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Users Tab -->
          <div class="admin-tab-content" id="adminUsers">
            <div class="admin-search-bar">
              <i class="fas fa-search"></i>
              <input type="text" id="adminUserSearch" placeholder="Rechercher un utilisateur...">
            </div>
            <div class="admin-table-container">
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Avatar</th>
                    <th>Nom</th>
                    <th>Username</th>
                    <th>Status</th>
                    <th>Messages</th>
                    <th>Inscrit le</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="adminUsersTableBody"></tbody>
              </table>
            </div>
          </div>

          <!-- Conversations Tab -->
          <div class="admin-tab-content" id="adminConversations">
            <div class="admin-search-bar">
              <i class="fas fa-search"></i>
              <input type="text" id="adminConvSearch" placeholder="Rechercher une conversation...">
            </div>
            <div class="admin-table-container">
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Avatar</th>
                    <th>Nom</th>
                    <th>Type</th>
                    <th>Membres</th>
                    <th>Messages</th>
                    <th>Créé par</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="adminConversationsTableBody"></tbody>
              </table>
            </div>
          </div>

          <!-- Messages Tab -->
          <div class="admin-tab-content" id="adminMessages">
            <div class="admin-messages-list" id="adminMessagesList"></div>
          </div>

          <!-- Logs Tab -->
          <div class="admin-tab-content" id="adminLogs">
            <div class="admin-logs-list" id="adminLogsList"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Update Notification Banner -->
    <div class="update-banner hidden" id="updateBanner">
      <div class="update-banner-content">
        <div class="update-icon">
          <i class="fas fa-download"></i>
        </div>
        <div class="update-info">
          <span class="update-title" id="updateTitle">Nouvelle version disponible</span>
          <span class="update-version" id="updateVersion">v1.0.0</span>
        </div>
        <div class="update-actions">
          <button class="update-btn download" id="updateDownloadBtn">Mettre à jour</button>
          <button class="update-btn later" id="updateLaterBtn"><i class="fas fa-times"></i></button>
        </div>
      </div>
      <div class="update-progress hidden" id="updateProgress">
        <div class="progress-bar">
          <div class="progress-fill" id="updateProgressFill"></div>
        </div>
        <span class="progress-text" id="updateProgressText">0%</span>
      </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal" id="confirmModal">
      <div class="modal-content confirm-modal-content">
        <div class="confirm-modal-body">
          <div class="confirm-icon" id="confirmIcon">
            <i class="fas fa-trash-alt"></i>
          </div>
          <h3 class="confirm-title" id="confirmTitle">Supprimer le message ?</h3>
          <p class="confirm-text" id="confirmText">Cette action est irr&#233;versible.</p>
        </div>
        <div class="confirm-modal-actions">
          <button class="confirm-btn cancel" id="confirmCancel">Annuler</button>
          <button class="confirm-btn danger" id="confirmOk">Supprimer</button>
        </div>
      </div>
    </div>
  </div>

  <script src="../src/app.js"></script>
</body>
</html>
